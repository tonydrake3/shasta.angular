<esub-base-card *ngIf="timecards?.length == 0 && !loading" class="timesheet-card">
  <div class="row card-title text-center">
    No results found. Please update your filters above.
  </div>
</esub-base-card>

<esub-base-card *ngIf="(timecards?.length == 0 && loading) || !timecards" class="timesheet-card" [loading]="true"></esub-base-card>

<esub-base-card *ngFor="let timecard of timecards" class="timesheet-card">

  <!-- header row -->
  <div class="row">

    <!-- name/project heading area -->
    <div class="col-md-4 card-title">
      {{timecard.cardTitle}}
      <p class="card-subtitle">
        {{timecard.subTitle}}
      </p>
    </div>

    <!-- repeater for each day -->
    <div class="col-md-1 card-day" *ngFor='let day of dateRange'>
      {{day.dayString}}
      <p class="card-date">
        {{day.dateString}}
      </p>
    </div>

  </div>

  <!-- repeater section for each grouping of employee/project/system/phase/costcode -->
  <section *ngFor="let section of timecard.sections | keys">
    <div *ngFor="let systemPhase of section.value | keys">
      <div *ngFor="let costCode of systemPhase.value | keys">

        <!-- section & hours -->
        <div class="row">
          <div class="col-md-4 card-section">
            {{costCode.value.grouping}}
          </div>
          <div class="col-md-1 card-hours" *ngFor="let day of costCode.value.days | keys"
            [ngClass]="{'card-hours-disabled': day.value.hours == 0}">
            {{day.value.hours | number:'1.0-2'}}
          </div>
        </div>

        <!-- systemPhase & indicator -->
        <div class="row">
          <div class="col-md-4 card-subsection">
            {{costCode.value.systemPhase}}
          </div>
          <div [ngClass]="{'hidden': day.value.hours == 0}"class="col-md-1 indicator" *ngFor="let day of costCode.value.days | keys" [ngSwitch]="day.value.status">
            <div *ngSwitchCase="'Approved'" class="green"></div>
            <div *ngSwitchCase="'Rejected'" class="red"></div>
            <div *ngSwitchCase="'Pending'" class="yellow"></div>
            <div *ngSwitchDefault class="hidden"></div>
          </div>
        </div>

        <!-- costCode & comments -->
        <div class="row">
          <div class="col-md-4 card-section">
            {{costCode.value.costCode}}
          </div>
          <div class="col-md-1" *ngFor="let day of costCode.value.days | keys">
            <i class="material-icons" [ngClass]="{'active': day.value.comments?.length > 0}" (click)="openChatModal(day.value.comments)">chat</i>
          </div>
        </div>

        <!-- select links & checkboxes -->
        <div class="row">
          <div class="col-md-4 card-link">
            <div class="row">
              <div class="col-md-4" (click)="markAll(costCode.value, true)">
                Select All
              </div>
              <div class="col-md-4" (click)="markAll(costCode.value, false)">
                Unselect All
              </div>
            </div>
          </div>
          <div class="col-md-1" *ngFor="let day of costCode.value.days | keys">
            <md-checkbox [hidden]="day.value.hours == 0" [(ngModel)]="day.value.selected"></md-checkbox>
          </div>
        </div>

      </div>
    </div>
  </section>

  <!-- footer row with totals -->
  <div class="row hours-total">
    <div class="col-md-4 card-hours">
      Hours Total
    </div>
    <div class="col-md-1 card-total-hours" *ngFor='let day of dateRange'>
      {{timesheetCardManager.getDayTotalHours(timecard, day) | number:'1.0-2'}}
    </div>
  </div>

</esub-base-card>
