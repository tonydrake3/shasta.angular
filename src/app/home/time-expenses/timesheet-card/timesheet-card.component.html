<esub-base-card *ngIf="timecards?.length == 0 && !loading" class="timesheet-card">
  <div class="row card-title text-center">
    No results found. Please update your filters above.
  </div>
</esub-base-card>

<esub-base-card *ngIf="(timecards?.length == 0 && loading) || !timecards" class="timesheet-card" [loading]="true"></esub-base-card>

<esub-base-card *ngFor="let timecard of timecards" class="timesheet-card" (click)="onTimeRecordClicked()">

  <!-- header row -->
  <div class="row">

    <!-- name/project heading area -->
    <div class="col-md-4 card-heading">
      <p class="card-title">
        {{timecard.cardTitle}}
      </p>
      <div class="icon-holder" (click)="timecard.expanded = !timecard.expanded">
        <i class="material-icons" *ngIf="!timecard.expanded">keyboard_arrow_down</i>
        <i class="material-icons" *ngIf="timecard.expanded">keyboard_arrow_up</i>
      </div>
      <p class="card-subtitle">
        {{timecard.subTitle}}
      </p>
    </div>

    <!-- repeater for each day -->
    <div class="col-md-1 card-day" *ngFor='let day of dateRange'>
      {{day.dayString}}
      <p class="card-date">
        {{day.dateString}}
      </p>
    </div>

  </div>

  <!-- repeater section for each grouping of employee/project/system/phase/costcode -->
  <section *ngFor="let section of timecard.sections | keys" [hidden]="!timecard.expanded">
    <div *ngFor="let systemPhase of section.value | keys">

      <!-- section & hours -->
      <div class="row">
        <div class="col-md-4">
          <span class="card-section">{{section.key}}</span>
          <span class="card-subsection">{{systemPhase.key}}</span>
        </div>
        <div class="col-md-1 card-hours" *ngFor="let day of dateRange"
          [ngClass]="{'card-hours-disabled': timesheetCardManager.getTimecardTotalHours(timecard, day, section.key, systemPhase.key) == 0}">
          {{timesheetCardManager.getTimecardTotalHours(timecard, day, section.key, systemPhase.key) | number:'1.0-2'}}
        </div>
      </div>

      <div *ngFor="let costCode of systemPhase.value | keys">

        <!-- costCode & comments -->
        <div class="row">
          <div class="col-md-4 label-regular">
            {{costCode.value.costCode}}
          </div>
          <div class="col-md-1" *ngFor="let day of costCode.value.days | keys">
            <esub-badged-hour [day]="day.value" [showBadges]="showBadges"></esub-badged-hour>
          </div>
        </div>

        <!-- select links & checkboxes -->
        <div class="row" *ngIf="showCheckboxes">
          <div class="col-md-4 card-link">
            <div class="row">
              <div class="col-md-4" (click)="markAll(costCode.value, true)">
                Select All
              </div>
              <div class="col-md-4" (click)="markAll(costCode.value, false)">
                Unselect All
              </div>
            </div>
          </div>
          <div class="col-md-1" *ngFor="let day of costCode.value.days | keys">
            <md-checkbox [hidden]="day.value.hours == 0" [(ngModel)]="day.value.selected"></md-checkbox>
          </div>
        </div>

      </div>
    </div>
  </section>

  <!-- footer row with totals -->
  <div class="row hours-total">
    <div class="col-md-4 card-hours">
      {{timesheetCardManager.getTimecardTotalHours(timecard) | number:'1.0-2'}} Hours Total
    </div>
    <div class="col-md-1 card-total-hours" *ngFor='let day of dateRange'>
      {{timesheetCardManager.getTimecardTotalHours(timecard, day) | number:'1.0-2'}}
    </div>
  </div>

</esub-base-card>
